<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TI4 9-Player Map</title>
    <link rel="stylesheet" href="map.css">
</head>
<body>
    <header>
        <h1>Twilight Imperium 4 - 9 Player Map</h1>
        <p>Hexagonal galaxy map ready for tile placement</p>
    </header>    <!-- Alternate Tile Placeholder Box -->
    <div class="alternate-tile-placeholder" id="alternateTilePlaceholder">
        <div class="placeholder-header">Position 1-4 Tile<br><small>(Player chooses which spot this tile goes<br>vs their 4 slice tiles)</small></div>
        <div class="placeholder-hex hex" id="alternateHex">
            <div class="tile-slot" id="alternateSlot">
                <div class="placeholder-text">4</div>
            </div>
        </div>
        <div class="placeholder-info" id="alternateInfo">
            <div class="tile-id">Tile ID: -</div>
            <div class="tile-type">Type: -</div>
        </div>
    </div>

    <div class="map-container">        <div class="hex-map" id="hexMap">
            <!-- Center: Mecatol Rex -->
            <div class="hex hex-center has-tile-image" data-position="0,0" data-tile-id="18" style="left: 660px; top: 660px;">
                <div class="tile-slot">
                    <div class="hex-tile-id-overlay tile-number">18</div>
                </div>
            </div>
            <!-- Ring 1: Around center - Hyperlanes -->
            <div class="hex hex-hyperlane rotate-60" data-position="0,1" style="left: 660px; top: 580px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-hyperlane rotate-120" data-position="1,0" style="left: 729px; top: 620px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-hyperlane rotate-180" data-position="1,-1" style="left: 729px; top: 700px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-hyperlane rotate-240" data-position="0,-1" style="left: 660px; top: 740px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-hyperlane rotate-300" data-position="-1,0" style="left: 591px; top: 700px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-hyperlane rotate-0" data-position="-1,1" style="left: 591px; top: 620px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Ring 2: Inner -->
            <div class="hex hex-inner" data-position="0,2" style="left: 660px; top: 500px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="1,1" style="left: 729px; top: 540px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="2,0" style="left: 798px; top: 580px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="2,-1" style="left: 798px; top: 660px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="2,-2" style="left: 798px; top: 740px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="1,-2" style="left: 729px; top: 780px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="0,-2" style="left: 660px; top: 820px;">
                <div class="tile-slot"></div>
            </div><div class="hex hex-inner" data-position="-1,-1" style="left: 591px; top: 780px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="-2,0" style="left: 522px; top: 740px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="-2,1" style="left: 522px; top: 660px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="-2,2" style="left: 522px; top: 580px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-inner" data-position="-1,2" style="left: 591px; top: 540px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Ring 3: Middle -->
            <div class="hex hex-middle" data-position="0,3" style="left: 660px; top: 420px;">
                <div class="tile-slot"><span class="player1-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="1,2" style="left: 729px; top: 460px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="2,1" style="left: 798px; top: 500px;">
                <div class="tile-slot"><span class="player2-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="3,0" style="left: 867px; top: 540px;">
                <div class="tile-slot"><span class="player3-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="3,-1" style="left: 867px; top: 620px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="3,-2" style="left: 867px; top: 700px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="3,-3" style="left: 867px; top: 780px;">
                <div class="tile-slot"><span class="player4-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="2,-3" style="left: 798px; top: 820px;">
                <div class="tile-slot"><span class="player5-number">5</span></div>
            </div> 
            <div class="hex hex-middle" data-position="1,-3" style="left: 729px; top: 860px;">
                <div class="tile-slot"></div>            </div>
            <!-- Hyperlane copy from (0,-5) -->
             <div class="hex hex-hyperlane-86A rotate-0" data-position="0,-3" style="left: 660px; top: 900px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="-1,-2" style="left: 591px; top: 860px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="-2,-1" style="left: 522px; top: 820px;">
                <div class="tile-slot"><span class="player6-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="-3,0" style="left: 453px; top: 780px;">
                <div class="tile-slot"><span class="player7-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="-3,1" style="left: 453px; top: 700px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="-3,2" style="left: 453px; top: 620px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-middle" data-position="-3,3" style="left: 453px; top: 540px;">
                <div class="tile-slot"><span class="player8-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="-2,3" style="left: 522px; top: 500px;">
                <div class="tile-slot"><span class="player9-number">5</span></div>
            </div>
            <div class="hex hex-middle" data-position="-1,3" style="left: 591px; top: 460px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Ring 4: Outer -->
            <div class="hex hex-outer" data-position="0,4" style="left: 660px; top: 340px;">
                <div class="tile-slot"><span class="player1-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="1,3" style="left: 729px; top: 380px;">
                <div class="tile-slot"><span class="player1-number">4</span></div>
            </div>
            <div class="hex hex-outer" data-position="2,2" style="left: 798px; top: 420px;">
                <div class="tile-slot"><span class="player2-number">2</span></div>
            </div>
            <!-- Player 2 position -->
             <div class="hex hex-outer" data-position="3,1" style="left: 867px; top: 460px;">
                <div class="tile-slot"><span class="player2-number">3</span></div>
            </div>
            <div class="hex hex-outer" data-position="4,0" style="left: 936px; top: 500px;">
                <div class="tile-slot"><span class="player3-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="4,-1" style="left: 936px; top: 580px;">
                <div class="tile-slot"><span class="player3-number">3</span></div>
            </div>
            <!-- Player 3 position -->
             <div class="hex hex-outer" data-position="4,-2" style="left: 936px; top: 660px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-outer" data-position="4,-3" style="left: 936px; top: 740px;">
                <div class="tile-slot"><span class="player4-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="4,-4" style="left: 936px; top: 820px;">
                <div class="tile-slot"><span class="player4-number">3</span></div>
            </div>
            <!-- Player 4 position -->
             <div class="hex hex-outer" data-position="3,-4" style="left: 867px; top: 860px;">
                <div class="tile-slot"><span class="player5-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="2,-4" style="left: 798px; top: 900px;">
                <div class="tile-slot"><span class="player5-number">3</span></div>
            </div>
            <!-- Hyperlane copy from (1,0)-->
            <div class="hex hex-hyperlane rotate-120" data-position="1,-4" style="left: 729px; top: 940px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Player 5 position -->
            <div class="hex hex-outer" data-position="0,-4" style="left: 660px; top: 980px;">
                <div class="tile-slot"></div>            </div>
            <!-- Hyperlane copy from (-1,1) -->
            <div class="hex hex-hyperlane rotate-0" data-position="-1,-3" style="left: 591px; top: 940px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-outer" data-position="-2,-2" style="left: 522px; top: 900px;">
                <div class="tile-slot"><span class="player6-number">2</span></div>
            </div>
            <!-- Player 6 position -->
             <div class="hex hex-outer" data-position="-3,-1" style="left: 453px; top: 860px;">
                <div class="tile-slot"><span class="player6-number">3</span></div>
            </div>
            <div class="hex hex-outer" data-position="-4,0" style="left: 384px; top: 820px;">
                <div class="tile-slot"><span class="player7-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="-4,1" style="left: 384px; top: 740px;">
                <div class="tile-slot"><span class="player7-number">3</span></div>
            </div>
            <!-- Player 7 position -->            <div class="hex hex-outer" data-position="-4,2" style="left: 384px; top: 660px;">
                <div class="tile-slot"></div>
            </div>
            <div class="hex hex-outer" data-position="-4,3" style="left: 384px; top: 580px;">
                <div class="tile-slot"><span class="player8-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="-4,4" style="left: 384px; top: 500px;">
                <div class="tile-slot"><span class="player8-number">3</span></div>
            </div>
            <!-- Player 8 position -->
             <div class="hex hex-outer" data-position="-3,4" style="left: 453px; top: 460px;">
                <div class="tile-slot"><span class="player9-number">2</span></div>
            </div>
            <div class="hex hex-outer" data-position="-2,4" style="left: 522px; top: 420px;">
                <div class="tile-slot"><span class="player9-number">3</span></div>
            </div>
            <!-- Player 9 position -->
             <div class="hex hex-outer" data-position="-1,4" style="left: 591px; top: 380px;">
                <div class="tile-slot"><span class="player1-number">4</span></div>
            </div>
            <!-- Ring 5: Outermost -->
            <!-- Top section -->
            <!-- Player 1 position -->
            <div class="hex hex-player" data-position="0,5" style="left: 660px; top: 260px;">
                <div class="tile-slot">1</div>
            </div>
            <div class="hex hex-outermost" data-position="1,4" style="left: 729px; top: 300px;">
                <div class="tile-slot"><span class="player1-number">3</span></div>
            </div>
            <div class="hex hex-outermost" data-position="2,3" style="left: 798px; top: 340px;">
                <div class="tile-slot"><span class="player2-number">1</span></div>
            </div>
              <!-- Top-right section -->
            <!-- Player 2 position -->
            <div class="hex hex-player" data-position="3,2" style="left: 867px; top: 380px;">
                <div class="tile-slot">2</div>
            </div>
            <div class="hex hex-outermost" data-position="4,1" style="left: 936px; top: 420px;">
                <div class="tile-slot"><span class="player2-number">4</span></div>
            </div>
            <div class="hex hex-outermost" data-position="5,0" style="left: 1005px; top: 460px;">
                <div class="tile-slot"><span class="player3-number">1</span></div>
            </div>
              <!-- Right section -->
            <!-- Player 3 position -->
            <div class="hex hex-player" data-position="5,-1" style="left: 1005px; top: 540px;">
                <div class="tile-slot">3</div>
            </div>
            <div class="hex hex-outermost" data-position="5,-2" style="left: 1005px; top: 620px;">
                <div class="tile-slot"><span class="player3-number">4</span></div>
            </div>
            <div class="hex hex-outermost" data-position="5,-3" style="left: 1005px; top: 700px;">
                <div class="tile-slot"><span class="player4-number">1</span></div>
            </div>
            <!-- Player 4 position -->
            <div class="hex hex-player" data-position="5,-4" style="left: 1005px; top: 780px;">
                <div class="tile-slot">4</div>
            </div>
            <div class="hex hex-outermost" data-position="5,-5" style="left: 1005px; top: 860px;">
                <div class="tile-slot"><span class="player4-number">4</span></div>
            </div>
              <!-- Bottom-right section -->
            <div class="hex hex-outermost" data-position="4,-5" style="left: 936px; top: 900px;">
                <div class="tile-slot"><span class="player5-number">1</span></div>
            </div>
            <!-- Player 5 position -->
            <div class="hex hex-player" data-position="3,-5" style="left: 867px; top: 940px;">
                <div class="tile-slot">5</div>
            </div>
            <div class="hex hex-outermost" data-position="2,-5" style="left: 798px; top: 980px;">
                <div class="tile-slot"><span class="player5-number">4</span></div>
            </div>
            <!-- Bottom section -->
             <div class="hex hex-hyperlane-83A rotate-0" data-position="1,-5" style="left: 729px; top: 1020px;">
                <div class="tile-slot"></div>            </div>
            <!-- Center hyperlane -->
            <div class="hex hex-hyperlane-86A rotate-0" data-position="0,-5" style="left: 660px; top: 1060px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Left hyperlane -->
            <div class="hex hex-hyperlane-83A rotate-240" data-position="-1,-4" style="left: 591px; top: 1020px;">
                <div class="tile-slot"></div>
            </div>
            <!-- Bottom-left section -->
            <div class="hex hex-outermost" data-position="-2,-3" style="left: 522px; top: 980px;">
                <div class="tile-slot"><span class="player6-number">1</span></div>
            </div>
            <!-- Player 6 position -->
            <div class="hex hex-player" data-position="-3,-2" style="left: 453px; top: 940px;">
                <div class="tile-slot">6</div>
            </div>
            <div class="hex hex-outermost" data-position="-4,-1" style="left: 384px; top: 900px;">
                <div class="tile-slot"><span class="player6-number">4</span></div>
            </div>            <!-- Left section -->
            <div class="hex hex-outermost" data-position="-5,0" style="left: 315px; top: 860px;">
                <div class="tile-slot"><span class="player7-number">1</span></div>
            </div>
            <!-- Player 7 position -->
            <div class="hex hex-player" data-position="-5,1" style="left: 315px; top: 780px;">
                <div class="tile-slot">7</div>
            </div>
            <div class="hex hex-outermost" data-position="-5,2" style="left: 315px; top: 700px;">
                <div class="tile-slot"><span class="player7-number">4</span></div>
            </div>
            <div class="hex hex-outermost" data-position="-5,3" style="left: 315px; top: 620px;">
                <div class="tile-slot"><span class="player8-number">1</span></div>
            </div>
            <!-- Player 8 position -->
            <div class="hex hex-player" data-position="-5,4" style="left: 315px; top: 540px;">
                <div class="tile-slot">8</div>
            </div>
            <div class="hex hex-outermost" data-position="-5,5" style="left: 315px; top: 460px;">
                <div class="tile-slot"><span class="player8-number">4</span></div>
            </div>
              <!-- Top-left section -->
            <div class="hex hex-outermost" data-position="-4,5" style="left: 384px; top: 420px;">
                <div class="tile-slot"><span class="player9-number">1</span></div>
            </div>
            <!-- Player 9 position -->
            <div class="hex hex-player" data-position="-3,5" style="left: 453px; top: 380px;">
                <div class="tile-slot">9</div>
            </div>
            <div class="hex hex-outermost" data-position="-2,5" style="left: 522px; top: 340px;">
                <div class="tile-slot"><span class="player9-number">4</span></div>
            </div>
            <div class="hex hex-outermost" data-position="-1,5" style="left: 591px; top: 300px;">
                <div class="tile-slot"><span class="player1-number">1</span></div>
            </div>
        </div>
    </div>

    <div class="controls-panel">
        <div class="menu-toggle" id="menuToggle">☰ Menu</div>
        <div class="menu" id="mainMenu">            <div class="menu-section">
                <h3>Display Options</h3>
                <label class="toggle-switch">
                    <input type="checkbox" id="togglePlayerSlices" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Player Slices</span>
                </label>
                
                <label class="toggle-switch">
                    <input type="checkbox" id="toggleAlternateTile" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Position 1-4 Tile</span>
                </label>
                

                
                <label class="toggle-switch">
                    <input type="checkbox" id="toggleTileArt" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Tile Art</span>
                </label>

                <label class="toggle-switch">
                    <input type="checkbox" id="toggleTileNumbers" checked>
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Tile Numbers</span>
                </label>

                <label class="toggle-switch">
                    <input type="checkbox" id="toggleTileInfo">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Tile Info Overlay</span>
                </label>
                
                <label class="toggle-switch">
                    <input type="checkbox" id="toggleValueHeatmap">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">Value Heatmap</span>
                </label>
                
            </div>
            <div class="menu-section">
                <h3>State Management</h3>
                <button id="saveStateButton" class="action-button">Save Map State</button>
                <button id="loadStateButton" class="action-button">Load Saved Map</button>
                <button id="shareMapButton" class="action-button">Share Map</button>
                <p class="action-description">Create shareable link with the current map state</p>
            </div>
            <div class="menu-section">
                <h3>Map Generation</h3>
                <button id="randomFillButton" class="action-button">Random Fill Universe</button>
                <button id="clearUniverseButton" class="action-button secondary">Clear Universe</button>
                <div class="excluded-tiles-container">
                    <h4>Exclude Tiles</h4>
                    <p class="action-description">Paste tile numbers to exclude from random generation:</p>
                    <textarea id="excludedTilesInput" placeholder="19,36,64,77,39
72,30,44,23,40
24,35,50,65,42"></textarea>
                </div>
            </div>
        </div>
    </div>    <div class="info-panel">
        <h3>Map Info</h3>
        <p>• 9-player TI4 map</p>
        <p>• Ready for tile placement</p>
        <p>• Click hexes to select</p>
        <p>• Right-click to clear tiles</p>
        <p>• Hover for coordinates</p>
    </div>    <div class="coordinates">
        <div class="coord-header">Tile Information</div>
        <div class="coord-content">
            <div class="coord-image-section">
                <div class="coord-hex-preview" id="coordHexPreview">
                    <div class="coord-placeholder-text">Hover over a tile</div>
                </div>
            </div>
            <div class="coord-info-section">
                <div class="coord-basic-info">
                    <div id="currentCoord">Position: -</div>
                    <div id="currentTile">Tile ID: -</div>
                </div>
                <div class="coord-detailed-info" id="coordDetailedInfo">
                    <div class="coord-resources" id="coordResources"></div>
                    <div class="coord-planets" id="coordPlanets"></div>
                    <div class="coord-special" id="coordSpecial"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tile Selection Modal -->
    <div id="tileSelectionModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Select a Tile</h2>
            <div class="search-container">
                <input type="text" id="tileSearchInput" placeholder="Search tiles...">
            </div>
            <div class="tile-list-container">
                <div id="tileList" class="tile-list"></div>
            </div>
        </div>
    </div>    <script src="data/reference-tiles.js"></script>
    <script src="data/tiles-reference.js"></script>
    <script src="map.js"></script>
</body>
</html>
